package nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin.tasks;

import nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin.service.DependencyService;
import org.gradle.api.DefaultTask;
import org.gradle.api.logging.Logger;
import org.gradle.api.tasks.TaskAction;

public class GenerateReport extends DefaultTask {

    private Logger logger;

    public GenerateReport() {
        setGroup("vulnerability tracer");
        setDescription("Generate report from dependency vulnerabilities, fetched from the FASTEN API");
        this.logger = getProject().getLogger();
    }

    @TaskAction
    public void runTask() {
        // Resolve dependencies and get their actual versions
        var dependencyService = new DependencyService(getProject().getLogger());
        var dependencyVersions = dependencyService.getProjectDependencies(getProject());

        // TODO: Collect vulnerabilities for the project

        // TODO: Prepare for saving

        // TODO: Save to file
    }

}
