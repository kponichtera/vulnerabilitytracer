package nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin;

import nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin.extensions.VulnerabilityTracerExtension;
import nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin.tasks.GenerateReport;
import nl.tudelft.kponichtera.thesis.vulnerabilitytracer.gradleplugin.tasks.PruneCache;
import org.gradle.api.Plugin;
import org.gradle.api.Project;

public class VulnerabilityTracerPlugin implements Plugin<Project> {

    public static final String EXTENSION_NAME = "vulnerabilityTracer";

    public static final String GENERATE_REPORT_TASK = "vulnerabilityTracerGenerateReport";
    public static final String PRUNE_CACHE_TASK = "vulnerabilityTracerPruneCache";

    @Override
    public void apply(Project target) {
        initialize(target);
        registerTasks(target);
    }

    private void initialize(Project project) {
        project.getExtensions().create(EXTENSION_NAME, VulnerabilityTracerExtension.class, project);
    }

    private void registerTasks(Project project) {
        project.getTasks().register(GENERATE_REPORT_TASK, GenerateReport.class);
        project.getTasks().register(PRUNE_CACHE_TASK, PruneCache.class);
    }

}
