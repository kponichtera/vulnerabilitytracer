version: 3

includes:
  qualitative-scenario1:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile qualitative-scenario1"
  qualitative-scenario2:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile qualitative-scenario2"
  qualitative-scenario3:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile qualitative-scenario3"
  quantitative-scenario1:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario1"
  quantitative-scenario2:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario2"
  quantitative-scenario3:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario3"
  quantitative-scenario4:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario4"
  quantitative-scenario5:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario5"
  quantitative-scenario6:
    taskfile: ./Taskfile-skaffold.yml
    vars:
      SKAFFOLD_FILE: "skaffold-experiment.yaml"
      SKAFFOLD_ARGS: "--profile quantitative-scenario6"

tasks:
  run:
    desc: "Runs instrumented microservices and their load generators"
    cmds:
      - task: qualitative-scenario2:run
  delete:
    desc: "Removes instrumented microservices and their load generators"
    cmds:
      - task: qualitative-scenario2:run
  clean:
    desc: "Removes all experimental scenarios"
    cmds:
      - task: qualitative-scenario1:delete
      - task: qualitative-scenario2:delete
      - task: qualitative-scenario3:delete
      - task: quantitative-scenario1:delete
      - task: quantitative-scenario2:delete
      - task: quantitative-scenario3:delete
      - task: quantitative-scenario4:delete
      - task: quantitative-scenario5:delete
      - task: quantitative-scenario6:delete