import {Component} from '@angular/core';
import {ToolbarModule} from "primeng/toolbar";
import {SplitButtonModule} from "primeng/splitbutton";
import {TableModule} from "primeng/table";
import {SeverityTagComponent} from "../dashboard/severity-tag/severity-tag.component";
import {TagModule} from "primeng/tag";
import {NgIf} from "@angular/common";
import {ActivatedRoute} from "@angular/router";

@Component({
  selector: 'app-details',
  standalone: true,
  imports: [
    ToolbarModule,
    SplitButtonModule,
    TableModule,
    SeverityTagComponent,
    TagModule,
    NgIf
  ],
  templateUrl: './details.component.html',
  styleUrl: './details.component.scss'
})
export class DetailsComponent {

  vulnerabilityId: string | null;

  services: ServiceRow[] = [
    new ServiceRow('Service 1', 'org.library:badlibrary:1.2.3', 0, 0, 'Restart service to count new vulnerability'),
    new ServiceRow('Service 2', 'org.library:badlibrary:1.2.3', 3, 1, 'Restart service to count new vulnerability'),
    new ServiceRow('Service 3', 'org.library:badlibrary:1.2.3', 10, 2, ''),
  ]

  constructor(private route: ActivatedRoute) {
    this.vulnerabilityId = this.route.snapshot.paramMap.get('id');
  }

}

class ServiceRow {
  serviceName: string;
  dependencyName: string;
  triggerCount: number;
  mitigationsEnabledCount: number;
  operationRequired: string;

  constructor(serviceName: string, dependencyName: string, triggerCount: number, mitigationsEnabledCount: number, operationRequired: string) {
    this.serviceName = serviceName;
    this.dependencyName = dependencyName;
    this.triggerCount = triggerCount;
    this.mitigationsEnabledCount = mitigationsEnabledCount;
    this.operationRequired = operationRequired;
  }
}
