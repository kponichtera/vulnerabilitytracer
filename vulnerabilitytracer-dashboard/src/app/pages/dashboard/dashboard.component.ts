import {Component} from '@angular/core';
import {TableModule} from "primeng/table";
import {ButtonModule} from "primeng/button";
import {Severity} from "../../common/severity";
import {SeverityTagComponent} from "./severity-tag/severity-tag.component";
import {ActivatedRoute, RouterLink} from "@angular/router";
import {CalendarModule} from "primeng/calendar";
import {InputGroupAddonModule} from "primeng/inputgroupaddon";
import {InputGroupModule} from "primeng/inputgroup";
import {FormsModule} from "@angular/forms";

const DEFAULT_DATE_INTERVAL_MINUTES = 15;

@Component({
  selector: 'app-dashboard',
  standalone: true,
  imports: [
    TableModule,
    ButtonModule,
    SeverityTagComponent,
    RouterLink,
    CalendarModule,
    InputGroupAddonModule,
    InputGroupModule,
    FormsModule,
  ],
  templateUrl: './dashboard.component.html',
  styleUrl: './dashboard.component.scss'
})
export class DashboardComponent {

  fromDateTime: Date;
  toDateTime: Date;

  vulnerabilities: VulnerabilityRow[] = [
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.UNDEFINED),
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.LOW),
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.MODERATE),
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.MEDIUM),
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.HIGH),
    new VulnerabilityRow('MOCK-2020-12345', 12345, Severity.CRITICAL),
  ]

  constructor() {
    this.toDateTime = new Date(Date.now());
    this.fromDateTime = new Date(this.toDateTime);
    this.fromDateTime.setMinutes(this.fromDateTime.getMinutes() - DEFAULT_DATE_INTERVAL_MINUTES);
  }

}

class VulnerabilityRow {
  id: string;
  triggerCount: number;
  severity: Severity;

  constructor(id: string, triggerCount: number, severity: Severity) {
    this.id = id;
    this.triggerCount = triggerCount;
    this.severity = severity;
  }

}
