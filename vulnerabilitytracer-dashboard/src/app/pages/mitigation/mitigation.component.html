<p-toast></p-toast>
<div class="container">
  <div>
    <p-toolbar>
      <div class="p-toolbar-group-start">
        <p-button icon="pi pi-arrow-left" [rounded]="true" [text]="true" routerLink="/"></p-button>
        <p>{{ vulnerabilityId }}</p>
      </div>
      <div class="p-toolbar-group-end">
      <span class="p-buttonset">
        <button pButton type="button" label="Details" routerLink="/{{ vulnerabilityId }}"></button>
        <button pButton type="button" label="Impact" routerLink="/{{ vulnerabilityId }}/impact"></button>
      </span>
      </div>
    </p-toolbar>
  </div>

  <div class="form-container">
    <p-inputGroup>
      <p-inputGroupAddon>
        From
      </p-inputGroupAddon>
      <p-calendar [showTime]="true" [showIcon]="true" [showSeconds]="true" [(ngModel)]="fromDateTime"
                  (onSelect)="reload()"></p-calendar>
    </p-inputGroup>
    <p-inputGroup>
      <p-inputGroupAddon>
        To
      </p-inputGroupAddon>
      <p-calendar [showTime]="true" [showIcon]="true" [showSeconds]="true" [(ngModel)]="toDateTime"
                  (onSelect)="reload()"></p-calendar>
    </p-inputGroup>
    <p-button icon="pi pi-refresh" (onClick)="reload()"></p-button>
  </div>

  <div>
    <p-tabView [(activeIndex)]="activeIndex" [scrollable]="true">
      @for (tab of serviceTabs; track tab.serviceName) {
        <p-tabPanel [header]="tab.serviceName">
          <app-mitigation-table [mitigationRows]="tab.mitigations"
                                (onMitigationChange)="onMitigationChange($event)"></app-mitigation-table>
        </p-tabPanel>
      }
    </p-tabView>
  </div>

</div>
