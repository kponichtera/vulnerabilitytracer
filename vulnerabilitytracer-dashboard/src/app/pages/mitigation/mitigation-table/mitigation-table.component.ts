import {Component, EventEmitter, Input, Output} from '@angular/core';
import {TableModule} from "primeng/table";
import {MitigationTableRow} from "./mitigation-table-row";
import {Mitigation} from "../../../common/mitigation";
import {FormsModule} from "@angular/forms";
import {SelectButtonChangeEvent, SelectButtonModule} from "primeng/selectbutton";
import {MitigationTableChangeEvent} from "./mitigation-table-change-event";

@Component({
  selector: 'app-mitigation-table',
  standalone: true,
  imports: [
    TableModule,
    SelectButtonModule,
    FormsModule
  ],
  templateUrl: './mitigation-table.component.html',
  styleUrl: './mitigation-table.component.scss'
})
export class MitigationTableComponent {

  protected mitigationOptions = [
    Mitigation.NONE,
    Mitigation.NOOP,
    Mitigation.ERROR,
  ];

  @Input()
  mitigationRows: MitigationTableRow[] = [];

  @Output()
  onMitigationChange = new EventEmitter<MitigationTableChangeEvent>();

  onChange(event: SelectButtonChangeEvent, callableId: number) {
    this.onMitigationChange.emit(new MitigationTableChangeEvent(callableId, event.value));
  }

}
