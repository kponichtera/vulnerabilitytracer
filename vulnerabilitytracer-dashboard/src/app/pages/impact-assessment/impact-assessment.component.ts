import {Component, OnInit} from '@angular/core';
import {ButtonModule} from "primeng/button";
import {ActivatedRoute, RouterLink} from "@angular/router";
import {ToolbarModule} from "primeng/toolbar";
import {InputGroupModule} from "primeng/inputgroup";
import {InputGroupAddonModule} from "primeng/inputgroupaddon";
import {CalendarModule} from "primeng/calendar";
import {FormsModule} from "@angular/forms";
import {ImpactGraphComponent} from "./impact-graph/impact-graph.component";

const DEFAULT_DATE_INTERVAL_MINUTES = 15;

@Component({
  selector: 'app-impact-assessment',
  standalone: true,
  imports: [
    ButtonModule,
    RouterLink,
    ToolbarModule,
    InputGroupModule,
    InputGroupAddonModule,
    CalendarModule,
    FormsModule,
    ImpactGraphComponent
  ],
  templateUrl: './impact-assessment.component.html',
  styleUrl: './impact-assessment.component.scss'
})
export class ImpactAssessmentComponent {

  vulnerabilityId: string;

  fromDateTime: Date;
  toDateTime: Date;

  constructor(private route: ActivatedRoute) {
    this.vulnerabilityId = this.route.snapshot.paramMap.get('id') || 'Unknown';
    this.toDateTime = new Date(Date.now());
    this.fromDateTime = new Date(this.toDateTime);
    this.fromDateTime.setMinutes(this.fromDateTime.getMinutes() - DEFAULT_DATE_INTERVAL_MINUTES);
  }

}
