import {Component, OnInit} from '@angular/core';
import {ButtonModule} from "primeng/button";
import {ActivatedRoute, RouterLink} from "@angular/router";
import {ToolbarModule} from "primeng/toolbar";
import {InputGroupModule} from "primeng/inputgroup";
import {InputGroupAddonModule} from "primeng/inputgroupaddon";
import {CalendarModule} from "primeng/calendar";
import {FormsModule} from "@angular/forms";
import {ImpactGraphComponent} from "./impact-graph/impact-graph.component";

const DefaultDateIntervalInMinutes = 15;

@Component({
  selector: 'app-impact-assessment',
  standalone: true,
  imports: [
    ButtonModule,
    RouterLink,
    ToolbarModule,
    InputGroupModule,
    InputGroupAddonModule,
    CalendarModule,
    FormsModule,
    ImpactGraphComponent
  ],
  templateUrl: './impact-assessment.component.html',
  styleUrl: './impact-assessment.component.scss'
})
export class ImpactAssessmentComponent {

  vulnerabilityId: string;

  fromDate: Date;
  toDate: Date;

  constructor(private route: ActivatedRoute) {
    this.vulnerabilityId = this.route.snapshot.paramMap.get('id') || 'Unknown';
    this.toDate = new Date(Date.now());
    this.fromDate = new Date(this.toDate);
    this.fromDate.setMinutes(this.fromDate.getMinutes() - DefaultDateIntervalInMinutes);
  }

}
