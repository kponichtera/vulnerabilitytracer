package nl.tudelft.kponichtera.thesis.vulnerabilitytracer.instrumentation;


import io.opentelemetry.javaagent.extension.instrumentation.TypeInstrumentation;
import io.opentelemetry.javaagent.extension.instrumentation.TypeTransformer;
import net.bytebuddy.description.type.TypeDescription;
import net.bytebuddy.matcher.ElementMatcher;
import net.bytebuddy.matcher.ElementMatchers;

/**
 * No-op instrumentation for integration with Muzzle.
 */
public class NoOpInstrumentation implements TypeInstrumentation {

    @Override
    public ElementMatcher<TypeDescription> typeMatcher() {
        return ElementMatchers.none();
    }

    @Override
    public ElementMatcher<ClassLoader> classLoaderOptimization() {
        // Never load the no-op instrumentation
        return ElementMatchers.none();
    }

    @Override
    public void transform(TypeTransformer transformer) {
        transformer.applyAdviceToMethod(
                ElementMatchers.none(),
                "nl.tudelft.kponichtera.thesis.vulnerabilitytracer.instrumentation.VulnerabilityTracerAdvice"
        );
    }

}
