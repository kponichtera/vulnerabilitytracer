#!/bin/sh
set -e

GOLANGCI_LINT_VERSION=v1.55.2
TASK_VERSION=v3.30.1
GOIMPORTS_VERSION=v0.15.0
SQLC_VERSION=v1.23.0
GOFUMPT_VERSION=v0.3.1
OAPI_CODEGEN_VERSION=v1.16.2
ATLAS_VERSION=v0.15.0

echo "Installing task"
go install github.com/go-task/task/v3/cmd/task@$TASK_VERSION

echo "Installing goimports"
go install golang.org/x/tools/cmd/goimports@$GOIMPORTS_VERSION

echo "Installing sqlc"
go install github.com/sqlc-dev/sqlc/cmd/sqlc@$SQLC_VERSION

echo "Installing gofumpt"
go install mvdan.cc/gofumpt@$GOFUMPT_VERSION

echo "Installing oapi-codegen"
go install github.com/deepmap/oapi-codegen/cmd/oapi-codegen@$OAPI_CODEGEN_VERSION

echo "Installing golangci-lint"
curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin $GOLANGCI_LINT_VERSION

echo "Installing atlas"
curl -sSf https://atlasgo.sh | CI=true ATLAS_VERSION=$ATLAS_VERSION sh
